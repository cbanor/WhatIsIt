var Shotgun;(function(n){var t;(function(t){var i=function(){function i(){}return i._readShortInt=function(n,t,i){return(i===void 0&&(i=ByteOrderEnum.LittleEndian),i==ByteOrderEnum.LittleEndian)?n[t]|n[t+1]<<8:n[t+1]|n[t]<<8},i._createUint8Array=function(n){return isNaN(n)?this._uint8ArrayDefined?new Uint8Array(n):n:this._uint8ArrayDefined?new Uint8Array(n):new Array(n)},i.toUnicodeBytes=function(t,i){var e,u;if(i===void 0&&(i=ByteOrderEnum.LittleEndian),n.Js.Library.isNullOrEmpty(t))return null;var o=t.length*2,r=this._createUint8Array(o),f=0;for(e=0;e<t.length;e++)u=t.charCodeAt(e),i==ByteOrderEnum.LittleEndian?(r[f++]=u&255,r[f++]=u>>8&255):(r[f++]=u>>8&255,r[f++]=u&255);return r},i.fromUnicodeBytes=function(n,t){var r,f,u,i;if(t===void 0&&(t=ByteOrderEnum.LittleEndian),!n||n.length===0)return null;for(r=new Array(Math.floor(n.length/2)),u=0,i=0;u<r.length;i+=2,u++)f=t==ByteOrderEnum.LittleEndian?n[i]|n[i+1]<<8:n[i+1]|n[i]<<8,r[u]=String.fromCharCode(f);return r.join("")},i.toUtf8Bytes=function(t){var f,i,s,u,r,o,e;if(n.Js.Library.isNullOrEmpty(t))return null;for(f=[],s=t.length,u=0;u<s;u++){if(r=t.charCodeAt(u),r>=55296&&r<=56319&&u+1<s&&(o=t.charCodeAt(u+1),o>=56320&&o<=57343&&(r=(r-55296)*1024+o- -9216,u++)),r<128?i=1:r<2048?i=2:r<65536?i=3:r<2097152?i=4:r<67108864?i=5:r<2147483648?i=6:(i=1,r=0),i===1){f.push(r);continue}for(e=255^(2<<7-i)-1,i*=6,i-=6,e|=r>>i,f.push(e),i-=6;i>=0;i-=6)e=r>>i&63,f.push(e|128)}return this._createUint8Array(f)},i.fromUtf8Bytes=function(n){var f,i,r,t,u,o,e;if(!n||n.length===0)return null;for(f=[],i=0,i=0;i<n.length;i++){if(t=n[i],r=(t&128)==0?1:(t&192)==128?1:(t&224)==192?2:(t&240)==224?3:(t&248)==240?4:(t&252)==248?5:(t&254)==252?6:1,r===1||i+r-1>=n.length){f.push(String.fromCharCode(t));continue}for(u=t&(1<<7-r)-1,o=!0,e=1;e<r;e++){if(t=n[i+e],(t&192)!=128){o=!1;break}u<<=6;u|=t&63}if(!o){f.push(String.fromCharCode(n[i]));continue}r>3?(u-=65536,f.push(String.fromCharCode((u>>10)+55296,(u&1023)+56320))):f.push(String.fromCharCode(u));i+=r-1}return f.join("")},i.initGBKMapping=function(){var n,u,f,r,e,o;if(this._gbkToUnicode&&this._unicodeToGbk)return!0;if(typeof t.Base64=="undefined")return console.error("Shotgun.Js.Base64 undefined!"),!1;if(n=this,!("_gbkUicodeMapping"in n))return console.error("_gbkUicodeMapping undefined!"),!1;for(u=n._gbkUicodeMapping,f=254,this._gbkToUnicode={},this._unicodeToGbk={};u.length;){var h=u.pop(),s=t.Base64.decode(h),i=64;for(r=0;r<s.length;r+=2,i++)i==127&&i++,e=i|f<<8,o=this._readShortInt(s,r),this._unicodeToGbk[o]=e,this._gbkToUnicode[e]=String.fromCharCode(o);f--}return delete n._gbkUicodeMapping,!0},i.fromGBKBytes=function(n){var u,t,i,r,f;if(!this.initGBKMapping())return console.error("initGBKMapping() fail!"),null;for(u=[],t=0,t=0;t<n.length;t++){if(i=n[t],i<129||i>254||t+1===n.length){u.push(String.fromCharCode(i));continue}if(r=n[t+1],r<64||r>254){u.push(String.fromCharCode(i));continue}if(f=r|i<<8,r=this._gbkToUnicode[f],typeof r=="undefined"){u.push(String.fromCharCode(i));continue}u.push(r);t++}return u.join("")},i.toGBKBytes=function(n){var f,r,u;if(!this.initGBKMapping())return console.error("initGBKMapping() fail!"),null;var e=n.length,o=e*2,t=this._createUint8Array(o),i=0;for(f=0;f<e;f++)r=n.charCodeAt(f),r<=127?t[i++]=r:(u=this._unicodeToGbk[r],typeof u=="undefined"&&(u=r),t[i++]=u>>8,t[i++]=u&255);return i==o?t:t.slice(0,i)},i.toGB2312Bytes=function(n){return this.toGBKBytes(n)},i.fromGB2312Bytes=function(n,t){var f,i,r,u,e;if(t===void 0&&(t=!1),!t)return this.fromGBKBytes(n);if(!this.initGBKMapping())return console.error("initGBKMapping() fail!"),null;for(f=[],i=0,i=0;i<n.length;i++){if(r=n[i],r<161||r>254||i+1===n.length){f.push(String.fromCharCode(r));continue}if(u=n[i+1],u<161||u>254){f.push(String.fromCharCode(r));continue}if(e=u|r<<8,u=this._gbkToUnicode[e],typeof u=="undefined"){f.push(String.fromCharCode(r));continue}f.push(u);i++}return f.join("")},i.isAscii=function(n){for(var i,r=n.length,t=0;t<r;t++)if(i=n[t],i===0||i>127)return!1;return!0},i.isUnicode=function(n,t){var f,u,r,i;if(t===void 0&&(t=ByteOrderEnum.LittleEndian),n.length%2)return!1;for(f=n.length/2,u=0,r=0;r<n.length;r+=2){if(i=this._readShortInt(n,r,t),i===0)return!1;i<128||i==65279||i>=12352&&i<=40895||i>=63744&&i<=64255||i>=65280&&i<=65519||i>=12288&&i<=12399||u++}return u/f<.1},i.isUtf8=function(n){for(var t,u=n.length,i=0,r=0;r<u;r++){if(t=n[r],i--,i>0){if((t&192)!=128)return!1;continue}if((t&128)==0)i=1;else{if((t&192)==128)return!1;if((t&224)==192)i=2;else if((t&240)==224)i=3;else if((t&248)==240)i=4;else if((t&252)==248)i=5;else if((t&254)==252)i=6;else return!1}}return!0},i.getGBxName=function(n){for(var t,o,f=n.length,u=0,r=0,e=0,i=0;i<f;i++){if(e++,t=n[i],t<7||t==255||t==128)return Encoder.Unknow;if(!(t<128)){if(o=t>=161,i++,i>=f)return Encoder.Unknow;if(t=n[i],o&&t>=161&&t<=254){u++;continue}if(t<64||t>254||t===127)return Encoder.Unknow;r++}}return r==0&&u>0?Encoder.Gb2312:u/r<10?Encoder.Unknow:r/e>.2?Encoder.Unknow:r==0?Encoder.Gb2312:Encoder.Gbk},i.bytesToString=function(n,t){switch(t){case Encoder.Ascii:case Encoder.Utf8:return this.fromUtf8Bytes(n);case Encoder.Unicode:case Encoder.Utf16_LE:return this.fromUnicodeBytes(n,ByteOrderEnum.LittleEndian);case Encoder.Utf16_BE:return this.fromUnicodeBytes(n,ByteOrderEnum.BigEndian);case Encoder.Gb2312:case Encoder.Gbk:return this.fromGBKBytes(n);default:throw{message:$Localizer.get("Unsupported encoding:{0}({1})",Encoder[t],t)};}},i.detection=function(n){var t,i;if(n.indexOf(0)==-1){if(this.isAscii(n))return Encoder.Ascii;if(this.isUtf8(n))return Encoder.Utf8;if(t=this.getGBxName(n),t!=Encoder.Unknow)return t}return n.length%2?Encoder.Unknow:(i=n[0]<<8|n[1],i==65534)?this.isUnicode(n,ByteOrderEnum.LittleEndian)?Encoder.Utf16_LE:Encoder.Unknow:i==65279?this.isUnicode(n,ByteOrderEnum.BigEndian)?Encoder.Utf16_BE:Encoder.Unknow:this.isUnicode(n,ByteOrderEnum.LittleEndian)?Encoder.Utf16_LE:this.isUnicode(n,ByteOrderEnum.BigEndian)?Encoder.Utf16_BE:Encoder.Unknow},i._uint8ArrayDefined=typeof Uint8Array!="undefined",i}();t.Charsets=i})(t=n.Js||(n.Js={}))})(Shotgun||(Shotgun={})),function(n){var t;(function(t){var i=function(){function t(){}return t.encode=function(n){for(var u=n.length%3,o=(Math.floor(n.length/3)+u>0?1:0)*4,i=new Array(o),e=n.length-u,r=0,t,f=2;f<e;f+=3)t=n[f-2]<<16,t|=n[f-1]<<8,t|=n[f],i[r++]=this._table[t>>18&63],i[r++]=this._table[t>>12&63],i[r++]=this._table[t>>6&63],i[r++]=this._table[t&63];return u>0&&(t=n[e++]<<16,u==2&&(t|=n[e]<<8),i[r++]=this._table[t>>18&63],i[r++]=this._table[t>>12&63],i[r++]=this._table[t>>6&63],i[r]="=",u==1&&(i[r-1]="=")),i.join("")},t.decode=function(t){for(var s=0,h=0,i=0,e=0,r=n.Js.Library.createUint8Array(Math.floor(t.length*3/4)),u=0,o,f;s<t.length;){if(o=t.charAt(s++),f=this._table.indexOf(o),f===-1)switch(o){case"=":f=0;e++;break;case" ":case"\n":case"\r":case"\t":continue;default:throw{message:$Localizer.get("Invalid character:{0}",o)};}if(e>0&&f!==0)throw{message:$Localizer.get("Invalid encoding")};(i=i<<6|f,++h==4)&&(r[u++]=i>>16,r[u++]=i>>8&255,r[u++]=i&255,i=h=0)}if(i!==0)throw{message:$Localizer.get("Wrong coding data length")};if(e>2)throw{message:$Localizer.get("Base64 coding format error")};else u-=e;return u==r.length?r:r.subarray(0,u)},t._table=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],t}();t.Base64=i})(t=n.Js||(n.Js={}))}(Shotgun||(Shotgun={}));